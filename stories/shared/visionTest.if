{
  "Tapestry:": [
    {
      "TestScene:requires:story:": [
        "vision testing",
        "Kitchenette",
        [
          {
            "Pattern:rules:": [
              "Print news of light",
              [
                {
                  "PatternRule:does:": [
                    {
                      "Always": true
                    },
                    [
                      {
                        "Say:": "The light, it burns."
                      }
                    ]
                  ]
                }
              ]
            ]
          }
        ]
      ]
    },
    {
      "TestRule:does:": [
        "vision testing",
        [
          {
            "Comment:": "the player's in darkness setting defaults to false."
          },
          {
            "Say:": {
              "RenderTemplate:": "{if .self.is_in_darkness}ng: started in darkness{else}ok: started in light{end}."
            }
          },
          {
            "Expect string:": "ok: started in light."
          },
          {
            "Comment:": "we expect to see darkness fall"
          },
          {
            "Put:from:at:": [
              {
                "ObjField:": "kitchen"
              },
              {
                "FromBool:": true
              },
              "unlit"
            ]
          },
          {
            "Expect string:": "It is now pitch dark in here!"
          },
          {
            "AdjustLight": true
          },
          {
            "Say:": {
              "RenderTemplate:": "{if .self.is_in_darkness}ok: left in the dark{else}ng: expected darkness{end}."
            }
          },
          {
            "Expect string:": "ok: left in the dark."
          },
          {
            "Comment:": "we expect to see light break forth in a glorious wonder"
          },
          {
            "Put:from:at:": [
              {
                "ObjField:": "kitchen"
              },
              {
                "FromBool:": true
              },
              "lit"
            ]
          },
          {
            "Expect string:": "The light, it burns."
          },
          {
            "AdjustLight": true
          },
          {
            "Say:": {
              "RenderTemplate:": "{if .self.is_in_darkness}ng: left in the dark{else}ok: expected darkness{end}."
            }
          },
          {
            "Expect string:": "ok: expected darkness."
          }
        ]
      ]
    }
  ]
}
