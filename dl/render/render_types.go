// Text template rendering.
// ( everything is "internal" because text templates generate the commands;
//
//	nothing is exposed for authors. )
package render

//
// Code generated by Tapestry; edit at your own risk.
//

import (
	"git.sr.ht/~ionous/tapestry/dl/object"
	"git.sr.ht/~ionous/tapestry/dl/prim"
	"git.sr.ht/~ionous/tapestry/dl/rtti"
	"git.sr.ht/~ionous/tapestry/lang/typeinfo"
)

// render_eval, a type of slot.
var Zt_RenderEval = typeinfo.Slot{
	Name: "render_eval",
	Markup: map[string]any{
		"comment":  "Used with render pattern for arguments of unknown type.",
		"internal": true,
	},
}

// Holds a single slot.
type RenderEval_Slot struct{ Value RenderEval }

// Implements [typeinfo.Instance] for a single slot.
func (*RenderEval_Slot) TypeInfo() typeinfo.T {
	return &Zt_RenderEval
}

// Holds a slice of slots.
type RenderEval_Slots []RenderEval

// Implements [typeinfo.Instance] for a slice of slots.
func (*RenderEval_Slots) TypeInfo() typeinfo.T {
	return &Zt_RenderEval
}

// Implements [typeinfo.Repeats] for a slice of slots.
func (op *RenderEval_Slots) Repeats() bool {
	return len(*op) > 0
}

// Handles changing a template like {.boombip} into text.
// If the name is a variable containing an object name: return the printed object name ( via "print name" );
// if the name is a variable with some other text: return that text;
// if the name isn't a variable but refers to some object: return that object's printed object name;
// otherwise, its an error.
type RenderName struct {
	Name   string
	Markup map[string]any `json:",omitempty"`
}

// render_name, a type of flow.
var Zt_RenderName typeinfo.Flow

// Implements [typeinfo.Instance]
func (*RenderName) TypeInfo() typeinfo.T {
	return &Zt_RenderName
}

// Implements [typeinfo.Markup]
func (op *RenderName) GetMarkup(ensure bool) map[string]any {
	if ensure && op.Markup == nil {
		op.Markup = make(map[string]any)
	}
	return op.Markup
}

// Ensures the command implements its specified slots.
var _ rtti.TextEval = (*RenderName)(nil)

// Holds a slice of type RenderName.
type RenderName_Slice []RenderName

// Implements [typeinfo.Instance] for a slice of RenderName.
func (*RenderName_Slice) TypeInfo() typeinfo.T {
	return &Zt_RenderName
}

// Implements [typeinfo.Repeats] for a slice of RenderName.
func (op *RenderName_Slice) Repeats() bool {
	return len(*op) > 0
}

// Pull a value from name that might refer either to a variable, or to an object.
// This gets used by text templates when processing names.
// The templates don't attempt to determine which names are objects and which names are variables.
// For instance:
//   - Say: "{.story.title} by {.story.author}"
//
// uses UnknownDot for accessing "story".
type UnknownDot struct {
	Name   rtti.TextEval
	Dot    []object.Dot
	Markup map[string]any `json:",omitempty"`
}

// unknown_dot, a type of flow.
var Zt_UnknownDot typeinfo.Flow

// Implements [typeinfo.Instance]
func (*UnknownDot) TypeInfo() typeinfo.T {
	return &Zt_UnknownDot
}

// Implements [typeinfo.Markup]
func (op *UnknownDot) GetMarkup(ensure bool) map[string]any {
	if ensure && op.Markup == nil {
		op.Markup = make(map[string]any)
	}
	return op.Markup
}

// Ensures the command implements its specified slots.
var _ rtti.BoolEval = (*UnknownDot)(nil)
var _ rtti.NumEval = (*UnknownDot)(nil)
var _ rtti.TextEval = (*UnknownDot)(nil)
var _ rtti.RecordEval = (*UnknownDot)(nil)
var _ rtti.NumListEval = (*UnknownDot)(nil)
var _ rtti.TextListEval = (*UnknownDot)(nil)
var _ rtti.RecordListEval = (*UnknownDot)(nil)
var _ RenderEval = (*UnknownDot)(nil)

// Holds a slice of type UnknownDot.
type UnknownDot_Slice []UnknownDot

// Implements [typeinfo.Instance] for a slice of UnknownDot.
func (*UnknownDot_Slice) TypeInfo() typeinfo.T {
	return &Zt_UnknownDot
}

// Implements [typeinfo.Repeats] for a slice of UnknownDot.
func (op *UnknownDot_Slice) Repeats() bool {
	return len(*op) > 0
}

// Pull a value from an assignment of unknown affinity.
type RenderValue struct {
	Value  rtti.Assignment
	Markup map[string]any `json:",omitempty"`
}

// render_value, a type of flow.
var Zt_RenderValue typeinfo.Flow

// Implements [typeinfo.Instance]
func (*RenderValue) TypeInfo() typeinfo.T {
	return &Zt_RenderValue
}

// Implements [typeinfo.Markup]
func (op *RenderValue) GetMarkup(ensure bool) map[string]any {
	if ensure && op.Markup == nil {
		op.Markup = make(map[string]any)
	}
	return op.Markup
}

// Ensures the command implements its specified slots.
var _ RenderEval = (*RenderValue)(nil)

// Holds a slice of type RenderValue.
type RenderValue_Slice []RenderValue

// Implements [typeinfo.Instance] for a slice of RenderValue.
func (*RenderValue_Slice) TypeInfo() typeinfo.T {
	return &Zt_RenderValue
}

// Implements [typeinfo.Repeats] for a slice of RenderValue.
func (op *RenderValue_Slice) Repeats() bool {
	return len(*op) > 0
}

// A version of core's call pattern
// that figures out how to evaluate its arguments at runtime.
type RenderPattern struct {
	PatternName string
	Render      []RenderEval
	Markup      map[string]any `json:",omitempty"`
}

// render_pattern, a type of flow.
var Zt_RenderPattern typeinfo.Flow

// Implements [typeinfo.Instance]
func (*RenderPattern) TypeInfo() typeinfo.T {
	return &Zt_RenderPattern
}

// Implements [typeinfo.Markup]
func (op *RenderPattern) GetMarkup(ensure bool) map[string]any {
	if ensure && op.Markup == nil {
		op.Markup = make(map[string]any)
	}
	return op.Markup
}

// Ensures the command implements its specified slots.
var _ rtti.BoolEval = (*RenderPattern)(nil)
var _ rtti.TextEval = (*RenderPattern)(nil)
var _ RenderEval = (*RenderPattern)(nil)

// Holds a slice of type RenderPattern.
type RenderPattern_Slice []RenderPattern

// Implements [typeinfo.Instance] for a slice of RenderPattern.
func (*RenderPattern_Slice) TypeInfo() typeinfo.T {
	return &Zt_RenderPattern
}

// Implements [typeinfo.Repeats] for a slice of RenderPattern.
func (op *RenderPattern_Slice) Repeats() bool {
	return len(*op) > 0
}

// Generate text in a replaceable manner.
type RenderResponse struct {
	Name   string
	Text   rtti.TextEval
	Markup map[string]any `json:",omitempty"`
}

// render_response, a type of flow.
var Zt_RenderResponse typeinfo.Flow

// Implements [typeinfo.Instance]
func (*RenderResponse) TypeInfo() typeinfo.T {
	return &Zt_RenderResponse
}

// Implements [typeinfo.Markup]
func (op *RenderResponse) GetMarkup(ensure bool) map[string]any {
	if ensure && op.Markup == nil {
		op.Markup = make(map[string]any)
	}
	return op.Markup
}

// Ensures the command implements its specified slots.
var _ rtti.Execute = (*RenderResponse)(nil)
var _ rtti.TextEval = (*RenderResponse)(nil)

// Holds a slice of type RenderResponse.
type RenderResponse_Slice []RenderResponse

// Implements [typeinfo.Instance] for a slice of RenderResponse.
func (*RenderResponse_Slice) TypeInfo() typeinfo.T {
	return &Zt_RenderResponse
}

// Implements [typeinfo.Repeats] for a slice of RenderResponse.
func (op *RenderResponse_Slice) Repeats() bool {
	return len(*op) > 0
}

// init the terms of all flows in init
// so that they can refer to each other when needed.
func init() {
	Zt_RenderName = typeinfo.Flow{
		Name: "render_name",
		Lede: "render_name",
		Terms: []typeinfo.Term{{
			Name: "name",
			Type: &prim.Zt_Text,
		}},
		Slots: []*typeinfo.Slot{
			&rtti.Zt_TextEval,
		},
		Markup: map[string]any{
			"comment":  []string{"Handles changing a template like {.boombip} into text.", "If the name is a variable containing an object name: return the printed object name ( via \"print name\" );", "if the name is a variable with some other text: return that text;", "if the name isn't a variable but refers to some object: return that object's printed object name;", "otherwise, its an error."},
			"internal": true,
		},
	}
	Zt_UnknownDot = typeinfo.Flow{
		Name: "unknown_dot",
		Lede: "unknown",
		Terms: []typeinfo.Term{{
			Name: "name",
			Type: &rtti.Zt_TextEval,
		}, {
			Name:     "dot",
			Label:    "dot",
			Optional: true,
			Repeats:  true,
			Type:     &object.Zt_Dot,
		}},
		Slots: []*typeinfo.Slot{
			&rtti.Zt_BoolEval,
			&rtti.Zt_NumEval,
			&rtti.Zt_TextEval,
			&rtti.Zt_RecordEval,
			&rtti.Zt_NumListEval,
			&rtti.Zt_TextListEval,
			&rtti.Zt_RecordListEval,
			&Zt_RenderEval,
		},
		Markup: map[string]any{
			"comment":  []string{"Pull a value from name that might refer either to a variable, or to an object.", "This gets used by text templates when processing names.", "The templates don't attempt to determine which names are objects and which names are variables.", "For instance:", "  - Say: \"{.story.title} by {.story.author}\"", "uses UnknownDot for accessing \"story\"."},
			"internal": true,
		},
	}
	Zt_RenderValue = typeinfo.Flow{
		Name: "render_value",
		Lede: "render_value",
		Terms: []typeinfo.Term{{
			Name: "value",
			Type: &rtti.Zt_Assignment,
		}},
		Slots: []*typeinfo.Slot{
			&Zt_RenderEval,
		},
		Markup: map[string]any{
			"comment":  "Pull a value from an assignment of unknown affinity.",
			"internal": true,
		},
	}
	Zt_RenderPattern = typeinfo.Flow{
		Name: "render_pattern",
		Lede: "render",
		Terms: []typeinfo.Term{{
			Name: "pattern_name",
			Type: &prim.Zt_Text,
		}, {
			Name:    "render",
			Label:   "render",
			Repeats: true,
			Type:    &Zt_RenderEval,
		}},
		Slots: []*typeinfo.Slot{
			&rtti.Zt_BoolEval,
			&rtti.Zt_TextEval,
			&Zt_RenderEval,
		},
		Markup: map[string]any{
			"comment":  []string{"A version of core's call pattern", "that figures out how to evaluate its arguments at runtime."},
			"internal": true,
		},
	}
	Zt_RenderResponse = typeinfo.Flow{
		Name: "render_response",
		Lede: "render_response",
		Terms: []typeinfo.Term{{
			Name: "name",
			Type: &prim.Zt_Text,
		}, {
			Name:     "text",
			Label:    "text",
			Optional: true,
			Type:     &rtti.Zt_TextEval,
		}},
		Slots: []*typeinfo.Slot{
			&rtti.Zt_Execute,
			&rtti.Zt_TextEval,
		},
		Markup: map[string]any{
			"comment":  "Generate text in a replaceable manner.",
			"internal": true,
		},
	}
}

// package listing of type data
var Z_Types = typeinfo.TypeSet{
	Name: "render",
	Comment: []string{
		"Text template rendering.",
		"( everything is \"internal\" because text templates generate the commands;",
		" nothing is exposed for authors. )",
	},

	Slot:       z_slot_list,
	Flow:       z_flow_list,
	Signatures: z_signatures,
}

// A list of all slots in this this package.
// ( ex. for generating blockly shapes )
var z_slot_list = []*typeinfo.Slot{
	&Zt_RenderEval,
}

// A list of all flows in this this package.
// ( ex. for reading blockly blocks )
var z_flow_list = []*typeinfo.Flow{
	&Zt_RenderName,
	&Zt_UnknownDot,
	&Zt_RenderValue,
	&Zt_RenderPattern,
	&Zt_RenderResponse,
}

// gob like registration
func Register(reg func(any)) {
	reg((*RenderName)(nil))
	reg((*UnknownDot)(nil))
	reg((*RenderValue)(nil))
	reg((*RenderPattern)(nil))
	reg((*RenderResponse)(nil))
}

// a list of all command signatures
// ( for processing and verifying story files )
var z_signatures = map[uint64]typeinfo.Instance{
	14401057669022842575: (*RenderPattern)(nil),  /* bool_eval=Render:render: */
	2910903954323771519:  (*RenderPattern)(nil),  /* render_eval=Render:render: */
	3385363614654173788:  (*RenderPattern)(nil),  /* text_eval=Render:render: */
	4328811686385928991:  (*RenderName)(nil),     /* text_eval=RenderName: */
	15658359855727638606: (*RenderResponse)(nil), /* execute=RenderResponse: */
	6351613444865908923:  (*RenderResponse)(nil), /* text_eval=RenderResponse: */
	167592851841791829:   (*RenderResponse)(nil), /* execute=RenderResponse:text: */
	10415880721138830946: (*RenderResponse)(nil), /* text_eval=RenderResponse:text: */
	7608693554121607902:  (*RenderValue)(nil),    /* render_eval=RenderValue: */
	17111570366262455799: (*UnknownDot)(nil),     /* bool_eval=Unknown: */
	7142945508556196257:  (*UnknownDot)(nil),     /* num_eval=Unknown: */
	15564117523268286718: (*UnknownDot)(nil),     /* num_list_eval=Unknown: */
	4698552628680730302:  (*UnknownDot)(nil),     /* record_eval=Unknown: */
	9884996934000827391:  (*UnknownDot)(nil),     /* record_list_eval=Unknown: */
	6204944562707286791:  (*UnknownDot)(nil),     /* render_eval=Unknown: */
	6131627441378931796:  (*UnknownDot)(nil),     /* text_eval=Unknown: */
	8175014555023519193:  (*UnknownDot)(nil),     /* text_list_eval=Unknown: */
	11460948231998939576: (*UnknownDot)(nil),     /* bool_eval=Unknown:dot: */
	8896491134250799106:  (*UnknownDot)(nil),     /* num_eval=Unknown:dot: */
	16386625613115534957: (*UnknownDot)(nil),     /* num_list_eval=Unknown:dot: */
	13261214435043729325: (*UnknownDot)(nil),     /* record_eval=Unknown:dot: */
	10839879350254307744: (*UnknownDot)(nil),     /* record_list_eval=Unknown:dot: */
	8068510348549084104:  (*UnknownDot)(nil),     /* render_eval=Unknown:dot: */
	16265816148057261651: (*UnknownDot)(nil),     /* text_eval=Unknown:dot: */
	3954920282304405402:  (*UnknownDot)(nil),     /* text_list_eval=Unknown:dot: */
}
